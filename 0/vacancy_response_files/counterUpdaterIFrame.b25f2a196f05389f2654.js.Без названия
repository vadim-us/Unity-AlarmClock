!function(){var e,n={1699:function(e,n,t){"use strict";var r=t(7757),o=t.n(r),i=t(9666),a={set:function(e,n,t){if(void 0!==e){var r="".concat(e,"=").concat(n||"",";path=/");if(void 0!==t){var o=new Date;o.setTime(o.getTime()+36e5*t),r+=";expires=".concat(o.toUTCString())}document.cookie=r}},get:function(e){var n=null;return this.getAll().reverse().some((function(t){return t.name===e&&(n=t.value,!0)})),n},getAll:function(){return(document.cookie?document.cookie.split("; "):[]).map((function(e){var n,t=e.split("=");try{n=decodeURIComponent(t[1])}catch(e){n=t[1]}return{name:t[0],value:n}}))},remove:function(e){this.set(e,"",-1)}};function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var s,u="bloko_debug",l={viewMode:1,timestamp:(new Date).getTime()},d={log:[],push:function(e,n){d.log.push({types:e,args:n,timestamp:(new Date).getTime()-l.timestamp})}};!function(e){e[e.PRODUCTION=0]="PRODUCTION",e[e.TEST=1]="TEST",e[e.DEVELOP=2]="DEVELOP"}(s||(s={}));var f={},p={},v={init:function(){var e=function(e){for(var n,t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];(n=console)[e].apply(n,r)};void 0===f.error&&this.registerLog("error",this.viewMods.TEST,e.bind(this,"error")),void 0===f.warn&&this.registerLog("warn",this.viewMods.TEST,e.bind(this,"warn")),void 0===f.info&&this.registerLog("info",this.viewMods.DEVELOP,e.bind(this,"log")),this.setMod(a.get(u)),window.jsDebug=this},log:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];e.split(" ").forEach((function(e){var n=f[e];n&&n.viewMode<=l.viewMode&&n.handler.apply(n,t)})),d.push(e,t)},registerLog:function(e,n,t){f[e]={viewMode:n,handler:t}},registerUtility:function(e,n){p[e]=n},utility:p,viewMods:s,setMod:function(e){var n="string"==typeof e?parseInt(e,10):e;null===n||isNaN(n)||n<this.viewMods.PRODUCTION||n>this.viewMods.DEVELOP||(l.viewMode=n,a.set(u,n))},dump:function(){console.groupCollapsed("%s:%d","Debug dump",d.log.length),d.log.forEach((function(e){var n,t;(n=console).log.apply(n,function(e){if(Array.isArray(e))return c(e)}(t=["%d ms: [%s]",e.timestamp,e.types].concat(e.args))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),console.groupEnd()}},m=v;function h(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}m.init(),m.registerLog("error",m.viewMods.PRODUCTION,(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.globalVars.features.sentry_logging){var t=n.sentryFingerprint,r=h(n,["sentryFingerprint"]);i.$e((function(n){n.setTag("fromDebug","true"),t&&n.setFingerprint(t),r instanceof Object&&n.setExtras(r),i.Tb(e)}))}}));var g=m;var y,w,b="dummy.dummy";"".concat("https:").concat("//").concat(b);(w=y||(y={})).Anonymous="anonymous",w.NedoUser="nedouser",w.BackOffice="backoffice",w.Employer="employer",w.Applicant="applicant";var O,k,E=window.location.hostname.replace("chatik.",""),j=("".concat(window.location.protocol,"//").concat(E),"https://websocket.".concat(E));!function(e){e.Event="EVENT",e.Status="STATUS"}(O||(O={})),function(e){e.ChatMessageCreate="chat_message_create",e.UnreadChatsCountChange="unread_chats_count_change",e.Disconnect="disconnect",e.Connect="connect"}(k||(k={}));var S,T;!function(e){e.NewCounterValue="newCounterValue"}(T||(T={}));var x,C,M,P=6e5,V={stop:C=function(){x&&clearTimeout(x)},schedule:function(e,n){C(),x=setTimeout(e,n)}},D=function e(){V.stop(),fetch("https://".concat(self.location.host,"/api/unread"),{credentials:"include"}).then((function(e){return e.json()})).then((function(n){var t;null===(t=M)||void 0===t||t(n.unreadCount),V.schedule(e,P)})).catch((function(n){console.error(n),V.schedule(e,P)}))};function A(e,n,t,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(r,o)}t(2646);var _,L,N=Boolean(navigator.serviceWorker),U=function(){var e,n,t,r,o=(M=function(e){window.parent.postMessage(JSON.stringify({name:T.NewCounterValue,data:e}),"*")},e=D,n=3e3,r=function(){for(var r=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t&&clearTimeout(t),t=setTimeout((function(){t=null,e.apply(r,i)}),n)},r.cancel=function(){t&&clearTimeout(t),t=null},r);_=function(){o()},o()},I=function(){var e,n=(e=o().mark((function e(){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.serviceWorker.onmessage=function(e){window.parent.postMessage(JSON.stringify(e.data),"*")},e.prev=1,e.next=4,navigator.serviceWorker.register("".concat("./serviceWorker.js"),{scope:"/"});case 4:t=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),g.log("error",new Error("Service worker registration error: ".concat(e.t0))),U(),e.abrupt("return");case 12:return e.prev=12,e.next=15,t.update();case 15:return e.next=17,navigator.serviceWorker.ready;case 17:e.next=24;break;case 19:return e.prev=19,e.t1=e.catch(12),g.log("error",new Error("Service worker update error: ".concat(e.t1))),U(),e.abrupt("return");case 24:null===(n=navigator.serviceWorker.controller)||void 0===n||n.postMessage("getLastValue"),_=function(){var e;null===(e=navigator.serviceWorker.controller)||void 0===e||e.postMessage("updateCounter")};case 26:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){A(i,r,o,a,c,"next",e)}function c(e){A(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();N?window.addEventListener("load",(function(){I()})):U(),S=function(e){var n;e.type===O.Event&&e.data.eventType===k.UnreadChatsCountChange&&(null===(n=_)||void 0===n||n())},(L=document.createElement("iframe")).src="".concat(j,"/proxy-webapp/index.html"),L.style.display="none",document.body.appendChild(L),window.addEventListener("message",(function(e){var n,t;e.origin===j&&(e.data.type===O.Status?(e.data.data.connected,null===(n=S)||void 0===n||n({type:O.Event,data:{eventType:e.data.data.connected?"connect":"disconnect"}})):null===(t=S)||void 0===t||t(e.data))}))},174:function(e,n,t){"use strict";var r;t.r(n),t.d(n,{Breakpoint:function(){return r}}),function(e){e.XS="xs",e.S="s",e.M="m",e.L="l"}(r||(r={}));var o,i=r.M,a=function(e){return"getComputedStyle"in window?function(e){if(!e)return i;var n=e.getPropertyValue("font-family").replace(/['"]/g,"");return n&&Object.values(r).find((function(e){return e===n}))||i}(window.getComputedStyle(e)):i};n.default={breakpoint:r,getBreakpoint:function(){return function(){if(void 0===o){var e=((n=document.createElement("div")).className="bloko-media-marker",document.body.appendChild(n),n);o=a(e),window.addEventListener("resize",(function(){o=a(e)}))}var n;return o}()}}},241:function(){function e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function n(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){t(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var r;r={edge:{matches:/edge\/(\d+)/,minVersion:12},firefox:{matches:/firefox\/(\d+)\./,minVersion:40},operaMobile:{matches:/opera\/(\d+).+opera mobi/,minVersion:12},win_safari:{matches:/windows nt.+ version\/(\d+)\.[\d.]+ safari/,minVersion:9},ios_saf:{matches:/cpu(?: iphone)? os (\d+)_[\d_]+ like mac os x/,minVersion:8,exclude:function(e){return-1!==e.indexOf("yabrowser")}},android:{matches:/android (\d+\.\d)/,minVersion:4.1,exclude:function(e){var n=e.match(/webkit\/(\d+(?:\.\d+)?)/)[1];return parseFloat(n)>537}},chrome:{matches:/chrome\/(\d+)\./,minVersion:44},safari:{matches:/macintosh;.+ version\/(\d+)\.[\d.]+ safari/,minVersion:9},opera:{matches:/presto\/.+ version\/(\d+)/,minVersion:999},operaMini:{matches:/opera mini\/(\d+)/,minVersion:999},trident:{matches:/trident\/(\d+)\./,minVersion:999},ie:{matches:/msie (\d+)\./,minVersion:999},ie_mob:{matches:/iemobile\/(\d+)/,minVersion:999}},window.bloko=window.bloko||{},window.bloko.getUserAgentDetails=function(e,o){var i=e.toLowerCase(),a={isSupported:!0,browser:null,version:null},c=function(e,r){return r?Object.keys(e).map((function(o){var i=e[o];return t({},o,n({},i,{minVersion:r[o]||i.minVersion}))})).reduce((function(e,t){return n({},e,{},t)}),{}):e}(r,o);for(var s in c){var u=i.match(c[s].matches);if(u){var l=parseFloat(u[1]);if(!isNaN(l)){if(c[s].exclude&&c[s].exclude(i))continue;a.browser=s,a.version=l,l<c[s].minVersion&&(a.isSupported=!1);break}}}return a}}},t={};function r(e){var o=t[e];if(void 0!==o)return o.exports;var i=t[e]={id:e,loaded:!1,exports:{}};return n[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=n,e=[],r.O=function(n,t,o,i){if(!t){var a=1/0;for(l=0;l<e.length;l++){t=e[l][0],o=e[l][1],i=e[l][2];for(var c=!0,s=0;s<t.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((function(e){return r.O[e](t[s])}))?t.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var u=o();void 0!==u&&(n=u)}}return n}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[t,o,i]},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,{a:n}),n},r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.j=198,function(){var e={198:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var o,i,a=t[0],c=t[1],s=t[2],u=0;if(a.some((function(n){return 0!==e[n]}))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var l=s(r)}for(n&&n(t);u<a.length;u++)i=a[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},t=this.webpackChunkchatik=this.webpackChunkchatik||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var o=r.O(void 0,[216],(function(){return r(1699)}));o=r.O(o)}();
//# sourceMappingURL=counterUpdaterIFrame.b25f2a196f05389f2654.js.map